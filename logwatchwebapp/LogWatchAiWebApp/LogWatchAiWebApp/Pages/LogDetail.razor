@page "/log/{Id}"
@inject ApiClient Api
@inject NavigationManager Nav

<div class="container mt-4">

    <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">
            <h4 class="mb-0">Log Detail</h4>
        </div>

        <div class="card-body">

            @if (Entry == null)
            {
                <p>Loading…</p>
            }
            else
            {
                <div class="mb-3">
                    <label class="fw-bold">ID:</label>
                    <div>@Entry.Id</div>
                </div>

                <div class="mb-3">
                    <label class="fw-bold">Timestamp:</label>
                    <div>@Entry.Timestamp</div>
                </div>

                <div class="mb-3">
                    <label class="fw-bold">Level:</label>
                    <div>
                        <span class="badge bg-primary">@Entry.Level</span>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="fw-bold">Raw Log:</label>
                    <pre class="p-3 bg-light border rounded">@Entry.RawText</pre>
                </div>

                <button class="btn btn-secondary" @onclick="GoBack">
                    ← Zurück
                </button>
            }

        </div>
    </div>

</div>

@code {
    [Parameter] public string Id { get; set; }
    LogWatchAiWebApp.Shared.Models.LogEntryDto Entry;

    protected override async Task OnInitializedAsync()
    {
        Entry = await Api.GetLogByIdAsync(Id);
    }

    private void GoBack()
    {
        Nav.NavigateTo("/logs");
    }
}