@page "/log/{Id}"
@inject ApiClient Api
@inject NavigationManager Nav

<div class="container mt-4">

    <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">
            <h4 class="mb-0">Log Detail</h4>
        </div>

        <div class="card-body">

            @if (Entry == null)
            {
                <p>Loading…</p>
            }
            else
            {
                <div class="mb-3">
                    <label class="fw-bold">ID:</label>
                    <div>@Entry.Id</div>
                </div>

                <div class="mb-3">
                    <label class="fw-bold">Timestamp:</label>
                    <div>@Entry.Timestamp</div>
                </div>

                <div class="mb-3">
                    <label class="fw-bold">Level:</label>
                    <div>
                        <span class="badge bg-primary">@Entry.Level</span>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="fw-bold">Raw Log:</label>
                    <pre class="p-3 bg-light border rounded">@Entry.RawText</pre>
                </div>

                <button class="btn btn-secondary" @onclick="GoBack">
                    ← Back
                </button>
            }

        </div>
    </div>

</div>

@code {
    /// <summary>
    /// The ID of the log entry to display, provided through routing.
    /// </summary>
    [Parameter] public string Id { get; set; }

    /// <summary>
    /// Contains the loaded log entry data.
    /// </summary>
    LogEntryDto Entry;

    /// <summary>
    /// Loads the log entry from the backend when the component initializes.
    /// </summary>
    protected override async Task OnInitializedAsync()
    {
        Entry = await Api.GetLogByIdAsync(Id);
    }

    /// <summary>
    /// Navigates back to the log list page.
    /// </summary>
    private void GoBack()
    {
        Nav.NavigateTo("/logs");
    }
}